<!DOCTYPE HTML>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>OCaml Planet &#8211; OCaml</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Google Web Fonts -->
    <link href="http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" />
    <link href="http://fonts.googleapis.com/css?family=Domine:400,700" rel="stylesheet" />
    <!-- Only part of Bootstrap that we don't load from a CDN is our own customized CSS build. -->
    <link href="/static/css/bootstrap.css" rel="stylesheet" media="screen" />
    <link href="/static/css/bootstrap_mod.css" rel="stylesheet" media="screen" />
    <link href="/static/css/opamdoc.css" rel="stylesheet" media="screen" />
    <!--[if lt IE 9]>
        <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.2/html5shiv.js"></script>
    <![endif]-->
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
    <script type="text/javascript">
      function octry(x){
        if(document.getElementById('buttons').innerHTML=='') {
          t = document.getElementById('tryocaml');
          js = document.createElement("script"); js.type = "text/javascript"; js.src = "/try-ocaml.js";
          t.appendChild(js);
        } else {
          t = document.getElementById('tryocaml');
          t.style.display = 'block';
          document.getElementById('console').value = x;
          document.getElementById('console').focus();
          document.getElementById('console').select();
        }
      }
    </script>
  </head>
  <body>
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="brand" href="/"><img src="/static/img/ocaml.png" alt="OCaml" /></a>
          <div class="nav-collapse collapse">
                        <ul class="nav">
              <li ><a href="/learn/">Learn</a></li>
              <li ><a href="/docs/">Documentation</a></li>
              <li ><a href="/platform/">Platform</a></li>
              <li ><a href="/pkg/">Packages</a></li>
              <li ><a href="/community/">Community</a></li>
            </ul>

            <form id="searchform" class="navbar-search pull-right" method="get" action="http://www.google.com/search">
              <input value="site:http://ocaml.org/" name="q" type="hidden" />
              <input placeholder="Search" class="search-query" name="q" type="text" />
            </form>
          </div>
        </div>
      </div>
    </nav>
    
    <div class="container">
  <div class="row">
    

    <div id="content-primary" class="span8">
      <div id='tryocaml' class="content" style='display:none;'>
        <div class="container">
          <div class="row">
            <div id="lesson-message"></div>
            <div id="languages" style='display:none;'></div>
            <div id="menu-lessons" style='display:none'>
              <table class="zebra-striped">
                <tr><td id="text-x"><code></code></td> <td id=""></td></tr>
              </table>
            </div>
            <div class="span9 ocaml">
              <div id="toplevel-container">
                <pre id="output"></pre>
                <div id="sharp">#</div>
                <div id="toplevel"></div>
              </div>
              <div id="buttons"></div>
              <div id="graphics-title"></div>
              <div id="graphics"></div>
            </div>
          </div>
        </div>
      </div>

      <div id='main-contents' class="content">
        <!--  -->
<h1 id="OCamlPlanet"> OCaml Planet</h1><p>
The OCaml Planet aggregates various blogs from the OCaml community. It
is kindly provided by <a href='http://www.ocamlcore.com/'>OCamlCore</a>. If you
would like to be added, read the <a href='http://www.ocamlcore.org/planet/'>Planet subscription
HOWTO</a>.</p>
<p><br /></p>
<p><script type="text/javascript">function switchContent(id1,id2) {
     // Get the DOM reference
     var contentId1 = document.getElementById(id1);
     var contentId2 = document.getElementById(id2);
     // Toggle
     contentId1.style.display = "none";
     contentId2.style.display = "block";
     }</script><div><a name="737918f3f7de75aff5c248083da4fc44"></a><span class="rss-header"><span class="rss-title"><a href="http://ocaml-book.com/blog/2013/10/25/every-thing-i-did-to-publish-ocaml-from-the-very-beginning"> Everything I did to self-publish a textbook about OCaml (except for the writing part)</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">OCaml Book</span>, <span class="rss-date">04 Nov 2013</span></span><span class="rss-description"><div id="post1"><p>Lots of what is written about the self-publishing of technical books comes from people who have a huge mailing list from blogging, or who are writing about a terribly fashionable subject and can create buzz (not that there's anything wrong with that).</p><p>Here is a description of the self-publishing of a rather traditional book, with no particular marketing involved. </p><h2>The book</h2><p>I wanted to write an introductory book about programming in OCaml (which I use for work) since I felt one was lacking, and decided to do the publishing myself. I had previously published <a href="http://shop.oreilly.com/product/0636920021483.do">PDF Explained</a> with O'Reilly. I was happy with O'Reilly, but not with the DocBook typesetting system, nor with the money. I couldn't justify taking time off to write another book if the money wasn't there.</p><p>The result is <a href="http://www.ocaml-book.com/">OCaml from the Very Beginning</a>. </p><h2>How many copies do books about programming sell? </h2><p>The <a href="http://www.novelrank.com">NovelRank</a> website tracks Amazon ranks and deduces rough sales numbers from them. One needs to extrapolate for non-Amazon sales, of course. For scale, here are the sales of some popular (and not so popular) programming books in paper form on Amazon worldwide for the month of October 2013, according to NovelRank. </p><a onclick="switchContent('post1','post2')" class="btn" href="#737918f3f7de75aff5c248083da4fc44">Read more...</a></div><div id="post2" style="display: none"><p>Lots of what is written about the self-publishing of technical books comes from people who have a huge mailing list from blogging, or who are writing about a terribly fashionable subject and can create buzz (not that there's anything wrong with that).</p><p>Here is a description of the self-publishing of a rather traditional book, with no particular marketing involved. </p><h2>The book</h2><p>I wanted to write an introductory book about programming in OCaml (which I use for work) since I felt one was lacking, and decided to do the publishing myself. I had previously published <a href="http://shop.oreilly.com/product/0636920021483.do">PDF Explained</a> with O'Reilly. I was happy with O'Reilly, but not with the DocBook typesetting system, nor with the money. I couldn't justify taking time off to write another book if the money wasn't there.</p><p>The result is <a href="http://www.ocaml-book.com/">OCaml from the Very Beginning</a>. </p><h2>How many copies do books about programming sell? </h2><p>The <a href="http://www.novelrank.com">NovelRank</a> website tracks Amazon ranks and deduces rough sales numbers from them. One needs to extrapolate for non-Amazon sales, of course. For scale, here are the sales of some popular (and not so popular) programming books in paper form on Amazon worldwide for the month of October 2013, according to NovelRank. </p><ul><li>Real World Haskell (O'Reilly) 66</li><li>Introduction to Algorithms (MIT, paperback only) 182</li><li>Learn you a Haskell for Great Good (No Starch) 158</li><li>Concrete Mathematics (Addison-Wesley) 114</li><li>ML for the Working Programmer (Cambridge Univ. Press) 15</li><li>Programming F# 3.0 (O'Reilly) 22</li></ul><p></p><p></p><h2>Content Production</h2><p>The interior was written in LaTeX. The cover was done in <a href="http://www.xara.com/us/designer-pro/">Xara Designer Pro</a> using a stock photograph I paid for. Writing was done over five months, in a total of 84 work days, whilst continuing with the usual commitments (business, teaching).</p><p>The kindle version was produced from the LaTeX sources using tex4ht to make a single big HTML file and then <a href="http://calibre-ebook.com">Calibre</a> to convert to an ebook. This is a rather horrible process, all told, which took about a week to get right, and resulted in a significant diff to the original .tex file. Getting it remotely presentable is hard work.</p><p>I still don't understand how people read these kind of books on Kindle, but they seem to. </p><h2>Selling on Amazon with CreateSpace</h2><p><a href="http://createspace.com/">CreateSpace</a> is a subsidiary of Amazon, which will print paperback books on demand and list them on Amazon. You just upload the PDF files for the interior and cover, and the rest is automatic. OCaml from the Very Beginning is 9 x 7.5 inches, 204 pages in black and white, with a full colour cover. It costs about $3.25 to print, and CreateSpace &amp; Amazon take a cut after that.</p><p>List Price: <strong>$39.99</strong>. Amazon routinely discounts to about <strong>$35</strong>. Profit about <strong>$21</strong> per copy.</p><h2>Selling on Amazon Kindle</h2><p>Kindle has a horrible pricing model for publishing these kind of books. 70% royalty on books priced $9.99 or below, 35% otherwise. So pricing a book between between $10 and $20 makes no sense. I priced the book roughly the same as the print one, and signed up for MatchBook. The hope is that people just buy the paper one, getting the Kindle one for free, and netting me the profit from the print one, not the meagre take from the kindle one. </p><p>Price <strong>$35</strong>. Profit about <strong>$11.50</strong>  per copy.</p><h2>Selling the DRM-free PDF eBook</h2><p>A PDF of the book, sold from the <a href="http://www.ocaml-book.com/">ocaml-book.com</a> website, using <a href="http://e-junkie.com">e-junkie</a> for content delivery and PayPal for payment processing.</p><p>Price: <strong>$14.99. </strong><span>Profit about </span><strong>$14.10 </strong>per copy<strong>.</strong></p><p><span></span></p><h2>Marketing</h2><p></p><p>I announced the book to the OCaml mailing list, and blogged about it. The website was on about the third page of google for the search "ocaml book" but it reasonably quickly climbed to the middle of the front page, where it is today. There were no sales for the first two days, but I know that sinking feeling from other projects and was prepared for it. Then sales started trickling in. I sent off review copies to the Journal of Functional Programming and a couple of bloggers.</p><p>This is, so far as I can remember, the sum total of active marketing effort so far. </p><h2>Legal and financial issues</h2><p>Both CreateSpace and Amazon Kindle will, by default, give 30% of your net earnings to the IRS unless you can prove you are not a US citizen and your country has an appropriate tax treaty. This is relatively easy to deal with if you publish through an existing corporation like I did, but apparently individuals have to jump through more hoops.  There is lots of conflicting information about these issues online. If you don't get it done in time, claiming the already-withheld money is hard too.</p><p></p><p>A bright spot is that there is a real direct email address with a real human at Amazon for dealing with this tax issue, and the Kindle and CreateSpace systems are linked so that, upon request, paperwork relating to the tax status of one can be transferred to the other. </p><p>I also had to deposit six copies of the printed book with copyright libraries in the UK and the Republic of Ireland, as a condition of using the ISBN.  Each country will have its own rules.</p><h2>Up-front costs</h2><ul><li>ISBNs (Pack of 10) $201</li><li>Postage of free copies to draft reviewers etc. $80</li><li>Proofs from CreateSpace with expedited shipping to the UK $134</li><li>25 copies for friends and so on, with expedited shipping $149</li><li>Stock photographs for cover and website $40</li></ul><p>Total <strong>$604. </strong>You could use a CreateSpace-assigned ISBN for free, get fewer proofs, and buy fewer sample copies and get this total down to about $150<strong>.</strong></p><p></p><p><span></span></p><h2>Running costs</h2><p></p><p><a href="http://www.squarespace.com">Squarespace</a> web hosting, $8 per month. <a href="http://www.e-junkie.com">E-junkie</a> for processing and content delivery of PDF eBook, $5 per month. Total <strong>$13</strong> per month. In theory, you could roll all this yourself for $0.</p><h2>Sales figures</h2><ul><li>June 7th-30th | Amazon 21, PDF eBook 13, Kindle 3 | Total net <strong>$652</strong></li><li>July | Amazon 12, PDF eBook 6, Kindle 15 | Total net <strong>$505</strong></li><li>August | Amazon 18, PDF eBook 9, Kindle 9 | Total net <strong>$603</strong></li><li>September | Amazon 24, PDF eBook 15, Kindle 9 | Total net <strong>$812</strong></li><li>October | Amazon 26, PDF eBook 20, Kindle 8 | Total net <strong>$912</strong></li></ul><p>It's hard to say how many copies will be sold in the next few years. There is another excellent OCaml book out soon (<a href="http://shop.oreilly.com/product/0636920024743.do">Real World OCaml</a> from O'Reilly), and things change with time. <span>However, should it sell a few hundred dollars a month steadily for the next five or ten years, I would consider it to be very decent pay for the work involved.</span></p><p>For comparison, here are the last five months' royalty payments from O'Reilly for PDF Explained: $99, $123, $99, $38, $109. (PDF Explained sells 50 - 100 copies a month, but is a smaller, cheaper book).  </p><p><span></span></p><h2>Some Advantages of traditional publishers</h2><p></p><ul><li>Traditional publishers might give you an advance on royalties (though I didn't get an advance from O'Reilly)</li><li><span>Traditional publishers will invest in translated editions (PDF Explained has been translated into Portuguese (Brazil) and Japanese). I will have to decide about, arrange, and pay for, translations for OCaml from the Very Beginning.</span></li><li><span></span><span>Traditional publishers have extra sales channels (I get part of a cent every time someone looks at a page of PDF Explained on <a href="http://www.safaribooksonline.com">Safari</a>, for example).</span></li><li>Traditional publishers will proof-read and edit the book and sometimes deal with things like indexing (though I had to write my own index for PDF Explained). To produce a book without an editor, you need to work hard and proof-read again and again.</li></ul><p></p><h2>Lessons</h2><p></p><ul><li>There is real money (as opposed to beer money) to be made, even if it's a niche book, so long as it sells consistently, and sales continue for several years. </li><li>Books require less maintenance than software, especially if written with that in mind (there's not a single URL in the book, and since it's a beginner's book, very little which might change). </li><li><span>If you can write and format a high quality book, the publishing side is really not hard at all in comparison. Once set up, the running costs and administration are trivial.</span></li></ul><p>At some point the industry might change such that it's not possible to earn $21 clear profit from a paperback textbook sale but until then, there's money to be made.</p><p></p><p></p><p></p><p> </p><a onclick="switchContent('post2','post1')" class="btn" href="#737918f3f7de75aff5c248083da4fc44">Hide</a></div></span>
<a name="c6e15f0c356db12e60552f7609d8e57c"></a><span class="rss-header"><span class="rss-title"><a href="https://forge.ocamlcore.org/projects/opam2debian/"> opam2debian</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">OCamlCore Forge Projects</span>, <span class="rss-date">31 Oct 2013</span></span><span class="rss-description">Create Debian package which contains a compiled set of OPAM packages.  The VCS is on github: https://github.com/gildor478/opam2debian</span>
<a name="48931886f38792232e560c45db71a093"></a><span class="rss-header"><span class="rss-title"><a href="http://ocamllabs.github.com/compiler-hacking/2013/10/30/third-compiler-hacking-session.html"> Third OCaml compiler hacking session</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author"><a href="mailto:cl-ocamllabs@lists.cam.ac.uk (OCaml Labs)">OCaml Labs compiler hacking</a></span>, <span class="rss-date">30 Oct 2013</span></span><span class="rss-description"><div id="post3"><p>It's time for the third Cambridge OCaml compiler-hacking session!  This time we're going to be back in the <a href="http://www.cl.cam.ac.uk/">Computer Lab</a>, where the first session was held.</p>

<p>If you're planning to come along, it'd be helpful if you could <a href="http://doodle.com/czzp7ik4r72npz6p"><strong>indicate interest via Doodle</strong></a> and <a href="http://lists.ocaml.org/listinfo/cam-compiler-hacking"><strong>sign up to the mailing list</strong></a> to receive updates:</p>

<p><strong>Where</strong>: Room <a href="http://www.cl.cam.ac.uk/research/dtg/openroommap/static/?s=FW11&amp;labels=1">FW11</a>, <a href="http://www.cl.cam.ac.uk/directions/">Computer Laboratory, Madingley Road</a></p>

<p><strong>When</strong>: 6pm, Wednesday 6th November</p>

<p><strong>Who</strong>: anyone interested in improving OCaml.  Knowledge of OCaml programming will obviously be helpful, but prior experience of working on OCaml internals isn't necessary.</p>

<p><strong>What</strong>: fixing bugs, implementing new features, learning about OCaml internals</p>

<p><strong>Wiki</strong>: <a href="https://github.com/ocamllabs/compiler-hacking/wiki">https://github.com/ocamllabs/compiler-hacking/wiki</a></p>

<p>We're defining "compiler" pretty broadly, to include anything that's part of the standard distribution, which means at least the <a href="http://caml.inria.fr/pub/docs/manual-ocaml-4.01/libref/index.html">standard library</a>, <a href="http://caml.inria.fr/pub/docs/manual-ocaml-4.00/manual024.html">runtime</a>, tools (<a href="http://caml.inria.fr/pub/docs/manual-ocaml-4.01/depend.html">ocamldep</a>, <a href="http://caml.inria.fr/pub/docs/manual-ocaml-4.00/manual026.html#toc105">ocamllex</a>, <a href="http://caml.inria.fr/pub/docs/manual-ocaml-4.00/manual026.html#toc107">ocamlyacc</a>, etc.), <a href="http://caml.inria.fr/pub/docs/manual-camlp4/manual002.html">camlp4</a>, <a href="http://caml.inria.fr/pub/docs/manual-ocaml-4.00/manual032.html">ocamlbuild</a>, the <a href="http://caml.inria.fr/resources/doc/index.en.html">documentation</a>, and the compiler itself.  We'll have suggestions for <a href="https://github.com/ocamllabs/compiler-hacking/wiki/Things-to-work-on">mini-projects</a> for various levels of experience, but feel free to come along and work on whatever you fancy.</p>

<a onclick="switchContent('post3','post4')" class="btn" href="#48931886f38792232e560c45db71a093">Read more...</a></div><div id="post4" style="display: none"><p>It's time for the third Cambridge OCaml compiler-hacking session!  This time we're going to be back in the <a href="http://www.cl.cam.ac.uk/">Computer Lab</a>, where the first session was held.</p>

<p>If you're planning to come along, it'd be helpful if you could <a href="http://doodle.com/czzp7ik4r72npz6p"><strong>indicate interest via Doodle</strong></a> and <a href="http://lists.ocaml.org/listinfo/cam-compiler-hacking"><strong>sign up to the mailing list</strong></a> to receive updates:</p>

<p><strong>Where</strong>: Room <a href="http://www.cl.cam.ac.uk/research/dtg/openroommap/static/?s=FW11&amp;labels=1">FW11</a>, <a href="http://www.cl.cam.ac.uk/directions/">Computer Laboratory, Madingley Road</a></p>

<p><strong>When</strong>: 6pm, Wednesday 6th November</p>

<p><strong>Who</strong>: anyone interested in improving OCaml.  Knowledge of OCaml programming will obviously be helpful, but prior experience of working on OCaml internals isn't necessary.</p>

<p><strong>What</strong>: fixing bugs, implementing new features, learning about OCaml internals</p>

<p><strong>Wiki</strong>: <a href="https://github.com/ocamllabs/compiler-hacking/wiki">https://github.com/ocamllabs/compiler-hacking/wiki</a></p>

<p>We're defining "compiler" pretty broadly, to include anything that's part of the standard distribution, which means at least the <a href="http://caml.inria.fr/pub/docs/manual-ocaml-4.01/libref/index.html">standard library</a>, <a href="http://caml.inria.fr/pub/docs/manual-ocaml-4.00/manual024.html">runtime</a>, tools (<a href="http://caml.inria.fr/pub/docs/manual-ocaml-4.01/depend.html">ocamldep</a>, <a href="http://caml.inria.fr/pub/docs/manual-ocaml-4.00/manual026.html#toc105">ocamllex</a>, <a href="http://caml.inria.fr/pub/docs/manual-ocaml-4.00/manual026.html#toc107">ocamlyacc</a>, etc.), <a href="http://caml.inria.fr/pub/docs/manual-camlp4/manual002.html">camlp4</a>, <a href="http://caml.inria.fr/pub/docs/manual-ocaml-4.00/manual032.html">ocamlbuild</a>, the <a href="http://caml.inria.fr/resources/doc/index.en.html">documentation</a>, and the compiler itself.  We'll have suggestions for <a href="https://github.com/ocamllabs/compiler-hacking/wiki/Things-to-work-on">mini-projects</a> for various levels of experience, but feel free to come along and work on whatever you fancy.</p>

<p>We'll also be ordering pizza, so if you want to be counted for food you should aim to arrive by 6.30pm.</p><a onclick="switchContent('post4','post3')" class="btn" href="#48931886f38792232e560c45db71a093">Hide</a></div></span>
<a name="8afa1a9b537573ed5bef4fa6cf597e30"></a><span class="rss-header"><span class="rss-title"><a href="http://syntaxexclamation.wordpress.com/2013/10/29/new-draft-on-normalization-by-evaluation-using-gadts/"> New draft on Normalization by Evaluation using GADTs</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">Matthias Puech</span>, <span class="rss-date">29 Oct 2013</span></span><span class="rss-description"><div id="post5"><p>There is a <a href="http://cs.au.dk/~mpuech/typeful.pdf" title="Tagless and Typeful Normalization by Evaluation using Generalized Algebraic Data Types">new draft</a> on my web page! It is called <em>Tagless and Typeful Normalization by Evaluation using Generalized Algebraic Data Types</em>, which is a mouthful, but only describes accurately the cool new OCaml development we elaborated together with <a href="http://www.cs.au.dk/~danvy/" title="Olivier Danvy">Olivier</a> and <a href="http://cs.au.dk/~chkeller" title="Chantal Keller">Chantal</a>. The world of Normalization by Evaluation (NbE) is still relatively new to me, but its wonders keep amazing me. It’s a program specialization algorithm… no, it’s a completeness proof for first-order logic… wait, it’s a technique to turn an interpreter into a compiler! Definitely, Aarhus University, my new home, is not the worst place to learn about it.</p>
<p>Since the introduction of GADTs in OCaml, a whole new realm of applications emerged, the most well-known being to faithfully represent typed languages: it allows to define compact and correct interpreters, and type-preserving program transformations. Ok, if you never saw this, here is a small snippet that should be self-explanatory:</p>
<a onclick="switchContent('post5','post6')" class="btn" href="#8afa1a9b537573ed5bef4fa6cf597e30">Read more...</a></div><div id="post6" style="display: none"><p>There is a <a href="http://cs.au.dk/~mpuech/typeful.pdf" title="Tagless and Typeful Normalization by Evaluation using Generalized Algebraic Data Types">new draft</a> on my web page! It is called <em>Tagless and Typeful Normalization by Evaluation using Generalized Algebraic Data Types</em>, which is a mouthful, but only describes accurately the cool new OCaml development we elaborated together with <a href="http://www.cs.au.dk/~danvy/" title="Olivier Danvy">Olivier</a> and <a href="http://cs.au.dk/~chkeller" title="Chantal Keller">Chantal</a>. The world of Normalization by Evaluation (NbE) is still relatively new to me, but its wonders keep amazing me. It’s a program specialization algorithm… no, it’s a completeness proof for first-order logic… wait, it’s a technique to turn an interpreter into a compiler! Definitely, Aarhus University, my new home, is not the worst place to learn about it.</p>
<p>Since the introduction of GADTs in OCaml, a whole new realm of applications emerged, the most well-known being to faithfully represent typed languages: it allows to define compact and correct interpreters, and type-preserving program transformations. Ok, if you never saw this, here is a small snippet that should be self-explanatory:</p>
<pre class="brush: fsharp; title: ; notranslate">type _ exp =
  | Val : 'a -&gt; 'a exp
  | Eq : 'a exp * 'a exp -&gt; bool exp
  | Add : int exp * int exp -&gt; int exp

let rec eval : type a. a exp -&gt; a = function
  | Val x -&gt; x
  | Eq (e1, e2) -&gt; eval e1 = eval e2
  | Add (e1, e2) -&gt; eval e1 + eval e2
;;
assert (eval (Eq (Add (Val 2, Val 2), Val 4)))
</pre>
<p>Nice, isn’t it? Our question was: if we can so beautifully go from typed syntax (expressions) to typed semantics (OCaml values), can we do the converse, i.e., go from an OCaml value back to a (normal) expression of the same type? In other words, can we implement NbE in a typeful manner, using GADTs?</p>
<p>The answer is a proud “yes”, but more interestingly, we all learned some interesting GADT techniques and puzzling logical interpretations on the way. Read on to know more!</p>
<blockquote><p><a href="http://cs.au.dk/~mpuech/typeful.pdf"><strong>Tagless and Typeful Normalization by Evaluation using Generalized Algebraic Data Types</strong></a></p>
<p>We present the first tagless and typeful implementation of normalization by evaluation for the simply typed λ-calculus in OCaml, using Generalized Algebraic Data Types (GADTs). In contrast to normalization by reduction, which is operationally carried out by repeated instances of one-step reduction, normalization by evaluation uses a non-standard model to internalize intermediate results: it is defined by composing a non-standard evaluation function with a reification function that maps the denotation of a term into the normal form of this term. So far, normalization by evaluation has been implemented either in dependently-typed languages such as Coq or Agda, or in general-purpose languages such as Scheme, ML or Haskell. In the latter case, denotations are either tagged or Church-encoded. Tagging means injecting denotations, either implicitly or explicitly, into a universal domain of values; Church encoding is based on the impredicativity of the metalanguage. Here, we show how to obtain not only tagless values, making evaluation efficient, but also typeful reification, guaranteeing type preservation and η-long, β-normal forms. To this end, we put OCaml’s GADTs to work. Furthermore, our implementation does not depend on any particular representation of binders (HOAS, de Bruijn levels or indices) nor on the style (direct style, continuation-passing style, etc.) of the non-standard evaluation function.</p></blockquote>
<p>PS: My previous draft, <a href="http://syntaxexclamation.wordpress.com/2013/06/17/new-draft-proofs-upside-down/" title="New draft: Proofs, upside down">Proofs, upside down</a> was accepted for presentation at <a href="http://aplas2013.soic.indiana.edu/" title="APLAS 2013">APLAS 2013</a>. See you in Melbourne!</p><br></br>  <a href="http://feeds.wordpress.com/1.0/gocomments/syntaxexclamation.wordpress.com/453/" rel="nofollow"><img src="http://feeds.wordpress.com/1.0/comments/syntaxexclamation.wordpress.com/453/" alt="" border="0"></img></a> <img src="http://stats.wordpress.com/b.gif?host=syntaxexclamation.wordpress.com&amp;blog=14690639&amp;post=453&amp;subd=syntaxexclamation&amp;ref=&amp;feed=1" alt="" height="1" border="0" width="1"></img><a onclick="switchContent('post6','post5')" class="btn" href="#8afa1a9b537573ed5bef4fa6cf597e30">Hide</a></div></span>
<a name="104b8723f43ad442f402379fcb6f8f89"></a><span class="rss-header"><span class="rss-title"><a href="http://amirchaudhry.com/fpdays-review"> Review of the OCaml FPDays tutorial</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">Amir Chaudhry</span>, <span class="rss-date">28 Oct 2013</span></span><span class="rss-description"><div id="post7"><a href="http://fpdays.net/2013/sessions/index.php?session=24"><img src="http://feeds.feedburner.com/images/web/fpdays-logo.png" style="float: right; margin-top: 10px; margin-left: 10px;"></img></a>
<p>Last Thursday a bunch of us from the OCaml Labs team gave an OCaml tutorial at the <a href="http://fpdays.net/2013/sessions/index.php?session=24">FPDays</a> conference (an event for people interested in Functional Programming). <a href="https://github.com/yallop">Jeremy</a> and I led the session with <a href="http://www.lpw25.net">Leo</a>, <a href="https://github.com/dsheets">David</a> and <a href="http://philippewang.info/CL/">Philippe</a> helping everyone progress and dealing with questions.</p>
<img src="http://feeds.feedburner.com/images/fpdays2013/fpdays2013-01.jpg" style="float: left; margin-right: 10px;"></img>
<p>It turned out to be by far the <em>most popular session</em> at the conference with over 20 people all wanting to get to grips with OCaml! An excellent turnout and a great indicator of the interest that’s out there, especially when you offer a hands-on session to people. This shouldn’t be a surprise as we’ve had good attendance for the general <a href="http://www.meetup.com/Cambridge-NonDysFunctional-Programmers/">OCaml meetups</a> I’ve run and also the <a href="http://ocamllabs.github.io/compiler-hacking/2013/09/17/compiler-hacking-july-2013.html">compiler hacking sessions</a>, which Jeremy and Leo have been building up (do sign up if you’re interested in either of those!). We had a nice surprise for attendees, which were <a href="http://en.wikipedia.org/wiki/Galley_proof">uncorrected proof</a> copies of Real World OCaml and luckily, we had just enough to go around.</p>

<p>For the tutorial itself, Jeremy put together a nice sequence of exercises and a <a href="https://github.com/ocamllabs/fpdays-skeleton">skeleton repo</a> (with helpful comments in the code) so that people could dive in quickly. The event was set up to be really informal and the rough plan was as following:</p>

<a onclick="switchContent('post7','post8')" class="btn" href="#104b8723f43ad442f402379fcb6f8f89">Read more...</a></div><div id="post8" style="display: none"><a href="http://fpdays.net/2013/sessions/index.php?session=24"><img src="http://feeds.feedburner.com/images/web/fpdays-logo.png" style="float: right; margin-top: 10px; margin-left: 10px;"></img></a>
<p>Last Thursday a bunch of us from the OCaml Labs team gave an OCaml tutorial at the <a href="http://fpdays.net/2013/sessions/index.php?session=24">FPDays</a> conference (an event for people interested in Functional Programming). <a href="https://github.com/yallop">Jeremy</a> and I led the session with <a href="http://www.lpw25.net">Leo</a>, <a href="https://github.com/dsheets">David</a> and <a href="http://philippewang.info/CL/">Philippe</a> helping everyone progress and dealing with questions.</p>
<img src="http://feeds.feedburner.com/images/fpdays2013/fpdays2013-01.jpg" style="float: left; margin-right: 10px;"></img>
<p>It turned out to be by far the <em>most popular session</em> at the conference with over 20 people all wanting to get to grips with OCaml! An excellent turnout and a great indicator of the interest that’s out there, especially when you offer a hands-on session to people. This shouldn’t be a surprise as we’ve had good attendance for the general <a href="http://www.meetup.com/Cambridge-NonDysFunctional-Programmers/">OCaml meetups</a> I’ve run and also the <a href="http://ocamllabs.github.io/compiler-hacking/2013/09/17/compiler-hacking-july-2013.html">compiler hacking sessions</a>, which Jeremy and Leo have been building up (do sign up if you’re interested in either of those!). We had a nice surprise for attendees, which were <a href="http://en.wikipedia.org/wiki/Galley_proof">uncorrected proof</a> copies of Real World OCaml and luckily, we had just enough to go around.</p>

<p>For the tutorial itself, Jeremy put together a nice sequence of exercises and a <a href="https://github.com/ocamllabs/fpdays-skeleton">skeleton repo</a> (with helpful comments in the code) so that people could dive in quickly. The event was set up to be really informal and the rough plan was as following:</p>

<ol>
<li>
<p><em>Installation/Intro</em> - We checked that people had been able to follow the <a href="http://amirchaudhry.com/fpdays-ocaml-session/">installation instructions</a>, which we’d sent them in advance. We also handed out copies of the book and made sure folks were comfortable with <a href="http://opam.ocaml.org">OPAM</a>.</p>
</li>

<li>
<p><em>Hello world</em> - A light intro to get people familiar with the OCaml syntax and installing packages with OPAM. This would also help people to get familiar with the toolchain, workflow and compilation.</p>
</li>

<li>
<p><em>Monty Hall browser game</em> - Using <a href="http://ocsigen.org/js_of_ocaml/"><code>js_of_ocaml</code></a>, we wanted people to create and run the <a href="http://en.wikipedia.org/wiki/Monty_Hall_problem">Monty Hall problem</a> in their browser. This would give people a taste of some real world interaction by having to deal with the DOM and interfaces. If folks did well, they could add code to keep logs of the game results.</p>
</li>

<li>
<p><em>Client-server game</em> - The previous game was all in the browser (so could be examined by players) so here the task was to split it into a client and server, ensuring the two stay in sync. This would demonstrate the re-usability of the OCaml code already written and give people a feel for client server interactions. If people wanted to do more, they could use <a href="http://opam.ocaml.org/pkg/ctypes/0.1.1/">ctypes</a> and get better random numbers.</p>
</li>
</ol>

<p>We did manage to stick to the overall scheme as above and we think this is a great base from which to improve future tutorials. It has the really nice benefit of having visual, interactive elements and the ability to run things both in the browser as well as on the server is a great way to show the versatility of OCaml. <code>js_of_ocaml</code> is quite a mature tool and so it’s no surprise that it’s also used by companies such as Facebook (see the recent <a href="http://www.youtube.com/watch?v=gKWNjFagR9k">CUFP talk by Julien Verlaguet</a> - skip to <a href="http://www.youtube.com/watch?feature=player_detailpage&amp;v=gKWNjFagR9k#t=1149">19:00</a>).</p>

<p>We learned a lot from running this session so we’ve captured the good, the bad and the ugly below. This is useful for anyone who’d like to run an OCaml tutorial in the future and also for us to be aware of the next time we do this. I’ve incorporated the feedback from the attendees as well as our own thoughts.</p>

<p><img src="http://feeds.feedburner.com/images/fpdays2013/fpdays2013-03.jpg" alt="Heads down and hands on"></img></p>

<h3 id="things_we_learnt">Things we learnt</h3>

<h4 id="the_good">The Good</h4>

<ul>
<li>
<p>Most people really did follow the install instructions beforehand. This made things so much easier on the day as we didn’t have to worry about compile times and people getting bored. A few people had even got in touch with me the night before to sort out installation problems.</p>
</li>

<li>
<p>Many folks from OCaml Labs also came over to help people, which meant no-one was waiting longer than around 10 seconds before getting help.</p>
</li>

<li>
<p>We had a good plan of the things we wanted to cover but we were happy to be flexible and made it clear the aim was to get right into it. Several folks told us that they really appreciated this loose (as opposed to rigid) structure.</p>
</li>

<li>
<p>We didn’t spend any time lecturing the room but instead got people right into the code. Having enough of a skeleton to get something interesting working was a big plus in this regard. People did progress from the early examples to the later ones fairly well.</p>
</li>

<li>
<p>We had a VM with the correct set up that we could log people into if they were having trouble locally. Two people made use of this.</p>
</li>

<li>
<p>Of course, It was great to have early proofs of the book and these were well-received.</p>
</li>
</ul>

<p><img src="http://feeds.feedburner.com/images/fpdays2013/fpdays2013-02.jpg" alt="RWO books galore!"></img></p>

<h4 id="the_bad">The Bad</h4>

<ul>
<li>
<p>In our excitement to get right into the exercises, we didn’t really give an overview of OCaml and its benefits. A few minutes at the beginning would be enough and it’s important so that people can leave with a few sound-bites.</p>
</li>

<li>
<p>Not everyone received my email about installation, and certainly not the late arrivals. This meant some pain getting things downloaded and running especially due to the wifi (see ‘Ugly’ below).</p>
</li>

<li>
<p>A few of the people who <em>had</em> installed, didn’t complete the instructions fully but didn’t realise this until the morning of the session. There was a good suggestion about having some kind of test to run that would check everything, so you’d know if there was something missing.</p>
</li>

<li>
<p>We really should have had a cut-off where we told people to use VMs instead of fixing installation issues and 10-15 minutes would have been enough. This would have been especially useful for the late-comers.</p>
</li>

<li>
<p>We didn’t really keep a record of the problems folks were having so we can’t now go back and fix underlying issues. To be fair, this would have been a little awkward to do ad-hoc but in hindsight, it’s a good thing to plan for.</p>
</li>
</ul>

<h4 id="the_ugly">The Ugly</h4>

<ul>
<li>The only ugly part was the wifi. It turned out that the room itself was a bit of a dead-spot and that wasn’t helped by 30ish devices trying to connect to one access point! Having everyone grab packages at the same time in the morning probably didn’t help. It was especially tricky as all our mitigation plans seemed to revolve around at least having local connectivity. In any case, this problem only lasted for the morning session and was a little better by the afternoon. I’d definitely recommend a backup plan in the case of complete wifi failure next time! One such plan that Leo got started on was to put the repository and other information onto a flash drive that could be shared with people. We didn’t need this in the end but it’ll be useful to have something like this prepared for next time. If anyone fancies donating a bunch of flash drives, I’ll happily receive them!</li>
</ul>

<p>Overall, it was a great session and everyone left happy, having completed most of the tutorial (and with a book!). A few even continued at home afterwards and <a href="https://twitter.com/richardclegg/status/393458073052139520">got in touch</a> to let us know that they got everything working. It was a great session and thanks to <a href="https://twitter.com/MarkDalgarno">Mark</a>, <a href="https://twitter.com/JacquiDDavidson">Jacqui</a> and the rest of the FPDays crew for a great conference!</p>

<p><img src="http://feeds.feedburner.com/images/fpdays2013/fpdays2013-04.jpg" alt="RWO Book giveaway"></img></p>

<p>(Thanks to Jeremy, Leo, David and Philippe for contributions to this post)</p><a onclick="switchContent('post8','post7')" class="btn" href="#104b8723f43ad442f402379fcb6f8f89">Hide</a></div></span>
<a name="9251389c28628a537d8247c99ab8f618"></a><span class="rss-header"><span class="rss-title"><a href="http://cufp.org/news/2013/cufp-2013-registration-information"> CUFP 2013 Registration Information</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">CUFP</span>, <span class="rss-date">25 Oct 2013</span></span><span class="rss-description"><p>The ICFP conference registration process has opened, and we've posted detailed information on how to register for CUFP <a href="http://cufp.org/cufp-2013-registration">here</a>.</p></span>
<a name="822a32747565018bd53e9ff1e4740952"></a><span class="rss-header"><span class="rss-title"><a href="http://cufp.org/news/2013/cufp-2013-call-tutorials"> CUFP 2013 Call for Tutorials</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">CUFP</span>, <span class="rss-date">25 Oct 2013</span></span><span class="rss-description"><p>Simon and Francesco, tutorial organizers for CUFP 2013, have put out a <a href="http://cufp.org/cufp2013-call-tutorials">call for tutorials</a>.</p>

<p>This is a great opportunity to teach FP or FP techniques to an eager audience.</p></span>
<a name="d77c69cee430ca8104ad55ecb708e439"></a><span class="rss-header"><span class="rss-title"><a href="https://forge.ocamlcore.org/forum/forum.php?forum_id=889"> Handling spam on the forge</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">OCamlCore Forge News</span>, <span class="rss-date">25 Oct 2013</span></span><span class="rss-description">Someone recently opens a bug against OUnit which contains a strange HTML attachment. This was a spam with an embedded page about whatever Life Insurance.

This is something I don't want to see on the Forge. I deleted the bug and suspended the user.

If you see this kind of spam in the bug tracking, don't delete the spam. Report a bug about it using the "Report bug" link in the footer and I will take care of deleting the bug and suspending the user.

Concerning mailing list, this is a bigger problem I need to address using another technique (still to be decided, suggestions are welcome). 

Happy hacking
Sylvain Le Gall</span>
<a name="302361c5802eabeca4d0ab44c3b05b76"></a><span class="rss-header"><span class="rss-title"><a href="http://amirchaudhry.com/fpdays-ocaml-session"> FP Days OCaml Session</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">Amir Chaudhry</span>, <span class="rss-date">22 Oct 2013</span></span><span class="rss-description"><div id="post9"><p>On Thursday, along with <a href="https://github.com/yallop">Jeremy</a> and <a href="http://www.lpw25.net">Leo</a>, I’ll be running an OCaml Hands-on Session at the <a href="http://fpdays.net/2013/">FPDays conference</a>. Below are some prep instructions for attendees.</p>

<h3 id="preparation_for_the_session">Preparation for the session</h3>

<p>If you’re starting from scratch, installation can take some time so it’s best to get as much done in advance as possible. You’ll need OPAM (the package manager), OCaml 4.01 (available through OPAM) and a few libraries before Thursday. If you have any issues, please contact Amir.</p>

<ul>
<li>
<p><strong>OPAM</strong>: Follow the instructions for your platform at <a href="http://opam.ocaml.org/doc/Quick_Install.html">http://opam.ocaml.org/doc/Quick_Install.html</a>. OPAM requires OCaml so hopefully the relevant dependencies will kick in and you’ll get OCaml too (most likely version 3.12). You can get a cup of coffee while you wait. After installation, run <code>opam init</code> to initialise OPAM.</p>
</li>

<li>
<p><strong>OCaml 4.01</strong>: We actually need the latest version of OCaml but OPAM makes this easy. Just run the following (and get more coffee):</p>
</li>
</ul>
<div class="highlight"><pre><code class="bash"><span class="nv">$ </span>opam update
<span class="nv">$ </span>opam switch 4.01.0
<span class="nv">$ </span><span class="nb">eval</span> <span class="sb">`</span>opam config env<span class="sb">`</span>
</code></pre></div>
<a onclick="switchContent('post9','post10')" class="btn" href="#302361c5802eabeca4d0ab44c3b05b76">Read more...</a></div><div id="post10" style="display: none"><p>On Thursday, along with <a href="https://github.com/yallop">Jeremy</a> and <a href="http://www.lpw25.net">Leo</a>, I’ll be running an OCaml Hands-on Session at the <a href="http://fpdays.net/2013/">FPDays conference</a>. Below are some prep instructions for attendees.</p>

<h3 id="preparation_for_the_session">Preparation for the session</h3>

<p>If you’re starting from scratch, installation can take some time so it’s best to get as much done in advance as possible. You’ll need OPAM (the package manager), OCaml 4.01 (available through OPAM) and a few libraries before Thursday. If you have any issues, please contact Amir.</p>

<ul>
<li>
<p><strong>OPAM</strong>: Follow the instructions for your platform at <a href="http://opam.ocaml.org/doc/Quick_Install.html">http://opam.ocaml.org/doc/Quick_Install.html</a>. OPAM requires OCaml so hopefully the relevant dependencies will kick in and you’ll get OCaml too (most likely version 3.12). You can get a cup of coffee while you wait. After installation, run <code>opam init</code> to initialise OPAM.</p>
</li>

<li>
<p><strong>OCaml 4.01</strong>: We actually need the latest version of OCaml but OPAM makes this easy. Just run the following (and get more coffee):</p>
</li>
</ul>
<div class="highlight"><pre><code class="bash"><span class="nv">$ </span>opam update
<span class="nv">$ </span>opam switch 4.01.0
<span class="nv">$ </span><span class="nb">eval</span> <span class="sb">`</span>opam config env<span class="sb">`</span>
</code></pre></div>
<ul>
<li><strong>Libraries</strong>: For the workshop you will need to check that you have the following installed: <code>libffi</code>, <code>pcre</code> and <code>pkg-config</code>. This will depend on your platform so on a Mac with homebrew I would do <code>brew install libffi pcre pkg-config</code> or on Debian or Ubuntu <code>apt-get install libffi-dev</code>. After this, two OCaml packages it’s worth installing in advance are <code>core</code> and <code>js_of_ocaml</code> so simply run:</li>
</ul>
<div class="highlight"><pre><code class="bash"><span class="nv">$ </span>opam install core js_of_ocaml
</code></pre></div>
<p>OPAM will take care of the dependencies and the rest we can get on the day!</p><a onclick="switchContent('post10','post9')" class="btn" href="#302361c5802eabeca4d0ab44c3b05b76">Hide</a></div></span>
<a name="47ac49b8fcdd4fcdecd3bce4c0d68ede"></a><span class="rss-header"><span class="rss-title"><a href="http://alan.petitepomme.net/cwn/2013.10.22.html"> Caml Weekly News, 22 Oct 2013</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">Caml Weekly News</span>, <span class="rss-date">22 Oct 2013</span></span><span class="rss-description">phphard / IPv6 packet parsing / Marshalling: automatic discard of unmashalable data via ephemerons / Other Caml News</span>
</div>
</p>
<p><em>Subscriptions</em></p>
<p><a href='http://planet.ocaml.org/rss20.xml'><img src='../img/rss20.png' alt='' /></a>
<a href='http://planet.ocaml.org/opml.xml'><img src='../img/opml.png' alt='' /></a></p>

      </div>
    </div>
  </div>
</div>

    <footer id="footer" class="navbar navbar-inverse navbar-fixed-bottom">
      <div class="navbar-inner">
        <div class="container-fluid">
          <ul class="nav pull-left">
            <li><a style='cursor:pointer;' onclick="document.getElementById('footer').style.display='none'">[X]</a></li>

            <li><a href="https://github.com/ocamllabs/sandbox-ocaml.org/tree/master/md-pages/community/planet.md">Edit this page</a></li>
          </ul>
          <ul class="nav pull-right">
            <li><a href="https://github.com/ocamllabs/sandbox-ocaml.org/issues">Feedback</a></li>
            <li><a href="https://github.com/ocamllabs/sandbox-ocaml.org/issues">Contact us</a></li>
            <li><a href="https://github.com/ocamllabs/sandbox-ocaml.org/">Find us on GitHub</a></li>
          </ul>
        </div>
      </div>
    </footer>
    <!-- Load javascript from CDN -->
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>
    <script type="text/javascript">
      // <!--
      if(document.getElementsByTagName('pre').length > 0)
         octry('')
      // -->
    </script>
  </body>
</html>
